*Balancing market introduced by Juan Gea-Bermudez and Polyneikis Kanellas


*Fixing commitment status from energy dispatch run
$ifi not %CommitmentStatus%==FastUnitsChange $goto No_FastUnitsChange
$ifi not %SOLVETYPE%==MIP $ifi %UnitComm%==yes
VUCON.FX(IY411,IA,IGUC,IS3,T)$((GDATA(IGUC,'GDUCDTMIN') GT WEIGHT_S(IS3) OR GDATA(IGUC,'GDUCUTMIN') GT WEIGHT_S(IS3)) AND GKFX(IY411,IA,IGUC) AND (NOT SUM(Y$(YVALUE(Y) LE YVALUE(IY411)),IAGKNY(Y,IA,IGUC)))AND (NOT (IGDECOMEXOPOT(IY411,IA,IGUC))))= UCON(IY411,IA,IGUC,IS3,T);
$ifi     %SOLVETYPE%==MIP $ifi %UnitComm%==yes VUCON.FX(IY411,IA,IGUC,IS3,T)$((GDATA(IGUC,'GDUCDTMIN') GT WEIGHT_S(IS3) OR GDATA(IGUC,'GDUCUTMIN') GT WEIGHT_S(IS3)) AND GKFX(IY411,IA,IGUC) AND (NOT SUM(Y$(YVALUE(Y) LE YVALUE(IY411)),IAGKNY(Y,IA,IGUC))) AND (NOT (IGDECOMEXOPOT(IY411,IA,IGUC)))) = ROUND(UCON(IY411,IA,IGUC,IS3,T));
$ifi not %SOLVETYPE%==MIP $ifi %UnitComm%==yes VUCON_STOLOAD.FX(IY411,IA,IGUC,IS3,T)$((GDATA(IGUC,'GDUCDTMIN') GT WEIGHT_S(IS3) OR GDATA(IGUC,'GDUCUTMIN') GT WEIGHT_S(IS3)) AND GKFX(IY411,IA,IGUC) AND (NOT SUM(Y$(YVALUE(Y) LE YVALUE(IY411)),IAGKNY(Y,IA,IGUC))) AND (NOT (IGDECOMEXOPOT(IY411,IA,IGUC))) AND (IGESTOALL(IGUC) OR IGHSTOALL(IGUC))) = UCON_STOLOAD(IY411,IA,IGUC,IS3,T);
$ifi     %SOLVETYPE%==MIP $ifi %UnitComm%==yes VUCON_STOLOAD.FX(IY411,IA,IGUC,IS3,T)$((GDATA(IGUC,'GDUCDTMIN') GT WEIGHT_S(IS3) OR GDATA(IGUC,'GDUCUTMIN') GT WEIGHT_S(IS3)) AND GKFX(IY411,IA,IGUC) AND (NOT SUM(Y$(YVALUE(Y) LE YVALUE(IY411)),IAGKNY(Y,IA,IGUC))) AND (NOT (IGDECOMEXOPOT(IY411,IA,IGUC))) AND (IGESTOALL(IGUC) OR IGHSTOALL(IGUC))) = ROUND(UCON_STOLOAD(IY411,IA,IGUC,IS3,T));
$label No_FastUnitsChange

$ifi not %CommitmentStatus%==NoChange  $goto No_NoChange
$ifi not %SOLVETYPE%==MIP $ifi %UnitComm%==yes VUCON.FX(IY411,IA,IGUC,IS3,T)$(GKFX(IY411,IA,IGUC) AND (NOT SUM(Y$(YVALUE(Y) LE YVALUE(IY411)),IAGKNY(Y,IA,IGUC))) AND (NOT (IGDECOMEXOPOT(IY411,IA,IGUC)))) = UCON(IY411,IA,IGUC,IS3,T);
$ifi     %SOLVETYPE%==MIP $ifi %UnitComm%==yes VUCON.FX(IY411,IA,IGUC,IS3,T)$(GKFX(IY411,IA,IGUC) AND (NOT SUM(Y$(YVALUE(Y) LE YVALUE(IY411)),IAGKNY(Y,IA,IGUC))) AND (NOT (IGDECOMEXOPOT(IY411,IA,IGUC)))) = ROUND(UCON(IY411,IA,IGUC,IS3,T));
$ifi not %SOLVETYPE%==MIP $ifi %UnitComm%==yes VUCON_STOLOAD.FX(IY411,IA,IGUC,IS3,T)$(GKFX(IY411,IA,IGUC) AND (NOT SUM(Y$(YVALUE(Y) LE YVALUE(IY411)),IAGKNY(Y,IA,IGUC))) AND (NOT (IGDECOMEXOPOT(IY411,IA,IGUC))) AND (IGESTOALL(IGUC) OR IGHSTOALL(IGUC))) = UCON_STOLOAD(IY411,IA,IGUC,IS3,T);
$ifi     %SOLVETYPE%==MIP $ifi %UnitComm%==yes VUCON_STOLOAD.FX(IY411,IA,IGUC,IS3,T)$(GKFX(IY411,IA,IGUC) AND (NOT SUM(Y$(YVALUE(Y) LE YVALUE(IY411)),IAGKNY(Y,IA,IGUC))) AND (NOT (IGDECOMEXOPOT(IY411,IA,IGUC))) AND (IGESTOALL(IGUC) OR IGHSTOALL(IGUC))) = ROUND(UCON_STOLOAD(IY411,IA,IGUC,IS3,T));
$label No_NoChange








